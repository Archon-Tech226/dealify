<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Dashboard - Dealify</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EüõçÔ∏è%3C/text%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="../../css/components.css">
  <link rel="stylesheet" href="../../css/dashboard.css">
  <link rel="stylesheet" href="../../css/responsive.css">
  <style>
    body { font-family: 'Inter', var(--font-family); }
    /* Buyer Theme ‚Äî Purple/Violet */
    .navbar { background: linear-gradient(135deg, #7C3AED, #8B5CF6) !important; }
    .navbar .navbar-logo, .navbar .navbar-logo span { color: #fff !important; }
    .navbar .navbar-link, .navbar .navbar-link span { color: #fff !important; }
    .navbar-search { background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.25); border-radius: 8px; }
    .navbar-search input { color: #fff; }
    .navbar-search input::placeholder { color: rgba(255,255,255,0.6); }
    .navbar-search-icon { color: rgba(255,255,255,0.6) !important; }
    .dashboard-sidebar { border-right: 3px solid #8B5CF6; }
    .sidebar-header { background: linear-gradient(135deg, #F5F3FF, #EDE9FE); border-bottom: 1px solid #DDD6FE; }
    .sidebar-link.active { background: #F5F3FF; color: #7C3AED !important; border-left: 3px solid #7C3AED; }
    .page-header h1 .text-primary { color: #7C3AED; }
    .stat-card { border-top: 3px solid transparent; }
    .stat-card:nth-child(1) { border-top-color: #8B5CF6; }
    .stat-card:nth-child(2) { border-top-color: #10B981; }
    .stat-card:nth-child(3) { border-top-color: #F59E0B; }
    .stat-card:nth-child(4) { border-top-color: #3B82F6; }
  </style>
</head>
<body>

  <div class="buyer-role-strip">üõçÔ∏è BUYER ACCOUNT</div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="../../index.html" class="navbar-logo">Deal<span>ify</span></a>
      <div class="navbar-search">
        <i data-lucide="search" class="navbar-search-icon"></i>
        <input type="text" placeholder="Search for products...">
      </div>
      <div class="navbar-actions">
        <a href="cart.html" class="navbar-link">
          <i data-lucide="shopping-cart"></i>
          <span>Cart</span>
        </a>
        <div class="user-dropdown">
          <button class="navbar-link" id="userDropdownBtn">
            <i data-lucide="user"></i>
            <span id="navUserName">Account</span>
          </button>
          <div class="user-dropdown-menu" id="userDropdownMenu">
            <a href="dashboard.html"><i data-lucide="layout-dashboard" style="width:16px;height:16px;"></i> Dashboard</a>
            <a href="orders.html"><i data-lucide="package" style="width:16px;height:16px;"></i> My Orders</a>
            <a href="wishlist.html"><i data-lucide="heart" style="width:16px;height:16px;"></i> Wishlist</a>
            <div class="user-dropdown-divider"></div>
            <button onclick="logout()"><i data-lucide="log-out" style="width:16px;height:16px;"></i> Logout</button>
          </div>
        </div>
      </div>
      <div class="hamburger" onclick="toggleSidebar()">
        <span></span><span></span><span></span>
      </div>
    </div>
  </nav>

  <div class="toast-container" id="toastContainer"></div>

  <!-- Dashboard Layout -->
  <div class="dashboard-wrapper">
    
    <!-- Sidebar -->
    <aside class="dashboard-sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-avatar" id="sidebarAvatar" style="background:#EDE9FE;color:#7C3AED;font-size:1.2rem;font-weight:700;">U</div>
        <div class="sidebar-user-info">
          <h4 id="sidebarName">User</h4>
          <p id="sidebarEmail">user@email.com</p>
        </div>
      </div>

      <nav class="sidebar-nav">
        <div class="sidebar-section">
          <div class="sidebar-section-title">Dashboard</div>
        </div>
        <a href="dashboard.html" class="sidebar-link active">
          <i data-lucide="layout-dashboard"></i> Overview
        </a>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Shopping</div>
        </div>
        <a href="orders.html" class="sidebar-link">
          <i data-lucide="package"></i> My Orders
          <span class="badge badge-primary">0</span>
        </a>
        <a href="wishlist.html" class="sidebar-link">
          <i data-lucide="heart"></i> Wishlist
        </a>
        <a href="cart.html" class="sidebar-link">
          <i data-lucide="shopping-cart"></i> Cart
        </a>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Account</div>
        </div>
        <a href="profile.html" class="sidebar-link">
          <i data-lucide="user"></i> My Profile
        </a>
        <a href="addresses.html" class="sidebar-link">
          <i data-lucide="map-pin"></i> My Addresses
        </a>
        <a href="reviews.html" class="sidebar-link">
          <i data-lucide="star"></i> My Reviews
        </a>
        <a href="#" class="sidebar-link" onclick="logout()">
          <i data-lucide="log-out"></i> Logout
        </a>
      </nav>
    </aside>

    <!-- Sidebar Overlay (mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Main Content -->
    <main class="dashboard-content">
      <div class="page-header">
        <div>
          <h1>Welcome back, <span id="welcomeName" class="text-primary">User</span>!</h1>
          <p>Here's what's happening with your account today.</p>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon purple">üì¶</div>
          <div class="stat-info">
            <h3>0</h3>
            <p>Total Orders</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon green">‚úÖ</div>
          <div class="stat-info">
            <h3>0</h3>
            <p>Delivered</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon orange">‚ù§Ô∏è</div>
          <div class="stat-info">
            <h3>0</h3>
            <p>Wishlist Items</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon blue">‚≠ê</div>
          <div class="stat-info">
            <h3>0</h3>
            <p>Reviews Given</p>
          </div>
        </div>
      </div>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        
        <!-- Recent Orders -->
        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <h3>Recent Orders</h3>
            <a href="orders.html" class="btn btn-ghost btn-sm">View All ‚Üí</a>
          </div>
          <div class="dashboard-card-body">
            <div class="empty-state">
              <div class="empty-state-icon">üì¶</div>
              <h3>No orders yet</h3>
              <p>Start shopping to see your orders here</p>
              <a href="../../index.html" class="btn btn-primary btn-sm mt-md">Browse Products</a>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <h3>Quick Actions</h3>
          </div>
          <div class="dashboard-card-body">
            <div class="quick-actions">
              <a href="../../index.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üõí</span>
                <span>Shop Now</span>
              </a>
              <a href="orders.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üì¶</span>
                <span>Track Orders</span>
              </a>
              <a href="wishlist.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">‚ù§Ô∏è</span>
                <span>Wishlist</span>
              </a>
              <a href="profile.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üë§</span>
                <span>Edit Profile</span>
              </a>
              <a href="addresses.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üìç</span>
                <span>Addresses</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Sidebar Toggle Button (mobile) -->
  <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">
    ‚ò∞
  </button>

  <script src="../../js/app.js"></script>
  <script>
    lucide.createIcons();

    // Auth check
    document.addEventListener('DOMContentLoaded', () => {
      const auth = getAuth();
      if (!auth || !auth.token || auth.user.role !== 'buyer') {
        window.location.href = '../auth/login.html';
        return;
      }

      // Populate user info
      const name = auth.user.name || 'User';
      document.getElementById('welcomeName').textContent = name;
      document.getElementById('sidebarName').textContent = name;
      document.getElementById('sidebarEmail').textContent = auth.user.email;
      document.getElementById('sidebarAvatar').textContent = name.charAt(0).toUpperCase();
      document.getElementById('navUserName').textContent = name.split(' ')[0];
    });

    // Sidebar toggle
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('sidebarOverlay').classList.toggle('active');
    }

    // User dropdown
    document.getElementById('userDropdownBtn').addEventListener('click', (e) => {
      e.stopPropagation();
      document.getElementById('userDropdownMenu').classList.toggle('active');
    });
    document.addEventListener('click', () => {
      document.getElementById('userDropdownMenu').classList.remove('active');
    });
  </script>
</body>
</html>
