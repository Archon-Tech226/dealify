<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Dashboard - Dealify</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EüõçÔ∏è%3C/text%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="stylesheet" href="../../css/components.css">
  <link rel="stylesheet" href="../../css/dashboard.css">
  <link rel="stylesheet" href="../../css/responsive.css">
  <style>
    body { font-family: 'Inter', var(--font-family); }
    /* Seller Theme ‚Äî Orange/Amber */
    .navbar { background: linear-gradient(135deg, #D97706, #F59E0B) !important; }
    .navbar .navbar-logo, .navbar .navbar-logo span { color: #fff !important; }
    .navbar .navbar-link, .navbar .navbar-link span { color: #fff !important; }
    .seller-badge {
      background: rgba(255,255,255,0.25);
      color: white;
      padding: 4px 14px;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.5px;
      border: 1px solid rgba(255,255,255,0.4);
    }
    .dashboard-sidebar { border-right: 3px solid #F59E0B; }
    .sidebar-header { background: linear-gradient(135deg, #FFFBEB, #FEF3C7); border-bottom: 1px solid #FDE68A; }
    .sidebar-link.active { background: #FFFBEB; color: #D97706 !important; border-left: 3px solid #D97706; }
    .stat-card { border-top: 3px solid transparent; }
    .stat-card:nth-child(1) { border-top-color: #8B5CF6; }
    .stat-card:nth-child(2) { border-top-color: #3B82F6; }
    .stat-card:nth-child(3) { border-top-color: #10B981; }
    .stat-card:nth-child(4) { border-top-color: #F59E0B; }
    .approval-banner {
      background: var(--warning-bg);
      border: 1px solid var(--warning);
      border-radius: var(--radius-md);
      padding: var(--space-md) var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
      font-size: var(--font-size-sm);
      color: #92400E;
    }
    .approval-banner.approved {
      background: var(--success-bg);
      border-color: var(--success);
      color: #065F46;
    }
  </style>
</head>
<body>

  <div class="seller-role-strip">üè™ SELLER ACCOUNT</div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="../../index.html" class="navbar-logo">Deal<span>ify</span></a>
      <div style="flex:1;"></div>
      <div class="navbar-actions">
        <span class="seller-badge">SELLER</span>
        <div class="user-dropdown">
          <button class="navbar-link" id="userDropdownBtn">
            <i data-lucide="user"></i>
            <span id="navUserName">Seller</span>
          </button>
          <div class="user-dropdown-menu" id="userDropdownMenu">
            <a href="dashboard.html"><i data-lucide="layout-dashboard" style="width:16px;height:16px;"></i> Dashboard</a>
            <a href="products.html"><i data-lucide="package" style="width:16px;height:16px;"></i> Products</a>
            <a href="profile.html"><i data-lucide="settings" style="width:16px;height:16px;"></i> Store Settings</a>
            <div class="user-dropdown-divider"></div>
            <button onclick="logout()"><i data-lucide="log-out" style="width:16px;height:16px;"></i> Logout</button>
          </div>
        </div>
      </div>
      <div class="hamburger" onclick="toggleSidebar()">
        <span></span><span></span><span></span>
      </div>
    </div>
  </nav>

  <div class="toast-container" id="toastContainer"></div>

  <!-- Dashboard Layout -->
  <div class="dashboard-wrapper">
    
    <!-- Sidebar -->
    <aside class="dashboard-sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-avatar" id="sidebarAvatar" style="background:#FED7AA;color:#EA580C;">S</div>
        <div class="sidebar-user-info">
          <h4 id="sidebarStoreName">Store Name</h4>
          <p id="sidebarApproval" class="badge badge-warning" style="font-size:0.6rem;">Pending</p>
        </div>
      </div>

      <nav class="sidebar-nav">
        <div class="sidebar-section">
          <div class="sidebar-section-title">Overview</div>
        </div>
        <a href="dashboard.html" class="sidebar-link active">
          <i data-lucide="layout-dashboard"></i> Dashboard
        </a>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Products</div>
        </div>
        <a href="products.html" class="sidebar-link">
          <i data-lucide="package"></i> All Products
        </a>
        <a href="add-product.html" class="sidebar-link">
          <i data-lucide="plus-circle"></i> Add Product
        </a>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Orders</div>
        </div>
        <a href="orders.html" class="sidebar-link">
          <i data-lucide="shopping-bag"></i> Orders
          <span class="badge badge-primary">0</span>
        </a>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Financial</div>
        </div>
        <a href="earnings.html" class="sidebar-link">
          <i data-lucide="indian-rupee"></i> Earnings
        </a>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Account</div>
        </div>
        <a href="profile.html" class="sidebar-link">
          <i data-lucide="store"></i> Store Profile
        </a>
        <a href="reviews.html" class="sidebar-link">
          <i data-lucide="star"></i> Reviews
        </a>
        <a href="#" class="sidebar-link" onclick="logout()">
          <i data-lucide="log-out"></i> Logout
        </a>
      </nav>
    </aside>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <!-- Main Content -->
    <main class="dashboard-content">
      
      <!-- Approval Banner -->
      <div class="approval-banner" id="approvalBanner">
        ‚è≥ <strong>Account Pending Approval</strong> ‚Äî Your seller account is under review. You'll be able to start selling once approved by admin.
      </div>

      <div class="page-header">
        <div>
          <h1>Seller Dashboard</h1>
          <p>Welcome to your seller control panel</p>
        </div>
        <a href="add-product.html" class="btn btn-primary">+ Add Product</a>
      </div>

      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon purple">üì¶</div>
          <div class="stat-info">
            <h3 id="statProducts">0</h3>
            <p>Total Products</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon blue">üõí</div>
          <div class="stat-info">
            <h3 id="statOrders">0</h3>
            <p>Total Orders</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon green">üí∞</div>
          <div class="stat-info">
            <h3 id="statEarnings">‚Çπ0</h3>
            <p>Total Earnings</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon orange">‚≠ê</div>
          <div class="stat-info">
            <h3 id="statRating">0.0</h3>
            <p>Store Rating</p>
          </div>
        </div>
      </div>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <h3>Recent Orders</h3>
            <a href="orders.html" class="btn btn-ghost btn-sm">View All ‚Üí</a>
          </div>
          <div class="dashboard-card-body">
            <div class="empty-state">
              <div class="empty-state-icon">üìã</div>
              <h3>No orders yet</h3>
              <p>Orders from customers will appear here</p>
            </div>
          </div>
        </div>

        <div class="dashboard-card">
          <div class="dashboard-card-header">
            <h3>Quick Actions</h3>
          </div>
          <div class="dashboard-card-body">
            <div class="quick-actions">
              <a href="add-product.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">‚ûï</span>
                <span>Add Product</span>
              </a>
              <a href="orders.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üì¶</span>
                <span>View Orders</span>
              </a>
              <a href="earnings.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üí∞</span>
                <span>Earnings</span>
              </a>
              <a href="profile.html" class="quick-action-btn">
                <span style="font-size:1.5rem;">üè™</span>
                <span>Store Settings</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>

  <script src="../../js/app.js"></script>
  <script>
    lucide.createIcons();

    document.addEventListener('DOMContentLoaded', () => {
      const auth = getAuth();
      if (!auth || !auth.token || auth.user.role !== 'seller') {
        window.location.href = '../auth/login.html';
        return;
      }

      const name = auth.user.name || 'Seller';
      document.getElementById('navUserName').textContent = name.split(' ')[0];
      document.getElementById('sidebarAvatar').textContent = name.charAt(0).toUpperCase();

      if (auth.seller) {
        document.getElementById('sidebarStoreName').textContent = auth.seller.storeName || 'My Store';

        // Update approval banner
        const banner = document.getElementById('approvalBanner');
        const approvalBadge = document.getElementById('sidebarApproval');

        if (auth.seller.isApproved === 'approved') {
          banner.className = 'approval-banner approved';
          banner.innerHTML = '‚úÖ <strong>Account Approved</strong> ‚Äî You can now add products and start selling!';
          approvalBadge.className = 'badge badge-success';
          approvalBadge.textContent = 'Approved';
        } else if (auth.seller.isApproved === 'rejected') {
          banner.innerHTML = '‚ùå <strong>Account Rejected</strong> ‚Äî Please contact support or update your details.';
          banner.style.background = 'var(--error-bg)';
          banner.style.borderColor = 'var(--error)';
          banner.style.color = '#991B1B';
          approvalBadge.className = 'badge badge-error';
          approvalBadge.textContent = 'Rejected';
        }
      }
    });

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
      document.getElementById('sidebarOverlay').classList.toggle('active');
    }

    document.getElementById('userDropdownBtn').addEventListener('click', (e) => {
      e.stopPropagation();
      document.getElementById('userDropdownMenu').classList.toggle('active');
    });
    document.addEventListener('click', () => {
      document.getElementById('userDropdownMenu').classList.remove('active');
    });
  </script>
</body>
</html>
